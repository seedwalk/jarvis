# Codebase Structure

**Analysis Date:** 2026-02-24

## Directory Layout

```text
jarvis/
├── .opencode/                        # OpenCode command packs, agents, and shared GSD workflows/templates
│   ├── agents/                       # Role-specific subagent contracts (planner/executor/verifier/mappers)
│   ├── commands/
│   │   ├── jarvis/                   # Jarvis-prefixed slash commands
│   │   └── gsd/                      # GSD-prefixed slash commands
│   └── get-shit-done/                # Shared workflow engine assets (workflows, templates, references)
├── .planning/                        # Runtime planning artifacts generated by commands
│   └── codebase/                     # Codebase map documents (this folder)
├── .jarvis/                          # Local runtime config and milestone files
│   └── milestones/                   # Milestone records, one folder per milestone
├── .specs/                           # Product/spec memory and session templates
├── bin/                              # Node installer executable source
├── docs-site/                        # Docusaurus documentation site
├── .github/workflows/                # CI workflows (docs deployment)
├── package.json                      # Root npm package metadata for installer distribution
└── README.md                         # User-facing setup/usage documentation
```

## Directory Purposes

**`.opencode/commands/jarvis/`:**
- Purpose: Define Jarvis command entrypoints.
- Contains: One Markdown contract per command, including frontmatter and process steps.
- Key files: `.opencode/commands/jarvis/new-project.md`, `.opencode/commands/jarvis/plan-phase.md`, `.opencode/commands/jarvis/execute-phase.md`, `.opencode/commands/jarvis/map-codebase.md`.

**`.opencode/commands/gsd/`:**
- Purpose: Provide equivalent GSD command namespace.
- Contains: GSD-prefixed command contracts with the same orchestration style.
- Key files: `.opencode/commands/gsd/new-project.md`, `.opencode/commands/gsd/plan-phase.md`, `.opencode/commands/gsd/map-codebase.md`.

**`.opencode/get-shit-done/workflows/`:**
- Purpose: Centralize reusable orchestration logic consumed by multiple commands.
- Contains: Long-form workflow procedures for planning, execution, verification, and mapping.
- Key files: `.opencode/get-shit-done/workflows/execute-phase.md`, `.opencode/get-shit-done/workflows/map-codebase.md`, `.opencode/get-shit-done/workflows/verify-phase.md`.

**`.opencode/get-shit-done/templates/`:**
- Purpose: Define output schemas for generated planning artifacts and reports.
- Contains: Markdown templates for plans, summaries, state, requirements, roadmap, and codebase docs.
- Key files: `.opencode/get-shit-done/templates/phase-prompt.md`, `.opencode/get-shit-done/templates/summary.md`, `.opencode/get-shit-done/templates/codebase/structure.md`.

**`.opencode/agents/`:**
- Purpose: Define role-specialized subagent behaviors.
- Contains: Agent prompt contracts with execution rules and structured return formats.
- Key files: `.opencode/agents/gsd-planner.md`, `.opencode/agents/gsd-executor.md`, `.opencode/agents/gsd-verifier.md`, `.opencode/agents/gsd-codebase-mapper.md`.

**`.jarvis/`:**
- Purpose: Hold per-repository runtime configuration and milestone logs.
- Contains: `config.json`, `config.example.json`, milestone directories with `MILESTONE.md` files.
- Key files: `.jarvis/config.json`, `.jarvis/milestones/opencode-jira-addon-review-and-install-validation/MILESTONE.md`.

**`.specs/`:**
- Purpose: Store product intent, business spec, and session conventions.
- Contains: Product docs and session templates.
- Key files: `.specs/vision.md`, `.specs/product-spec.md`, `.specs/templates/session.md`.

**`docs-site/`:**
- Purpose: Build and publish user documentation.
- Contains: Docusaurus config, docs markdown, page components, CSS, build output.
- Key files: `docs-site/docusaurus.config.js`, `docs-site/docs/intro.md`, `docs-site/src/pages/index.js`, `docs-site/src/css/custom.css`.

## Key File Locations

**Entry Points:**
- `bin/install.js`: Installer CLI implementation for `jarvis-cc`.
- `.opencode/commands/jarvis/help.md`: Primary command index for Jarvis namespace.
- `.opencode/commands/jarvis/new-project.md`: Project initialization entrypoint for planning lifecycle.
- `docs-site/src/pages/index.js`: Documentation web homepage entrypoint.

**Configuration:**
- `package.json`: Distribution metadata and executable mapping.
- `.opencode/package.json`: OpenCode plugin dependency declaration.
- `.jarvis/config.json`: Local runtime integration settings.
- `docs-site/docusaurus.config.js`: Docs site runtime config.
- `.github/workflows/deploy-docs.yml`: Deployment pipeline for docs site.

**Core Logic:**
- `.opencode/commands/jarvis/*.md`: Orchestrator-level behavior definitions.
- `.opencode/get-shit-done/workflows/*.md`: Reusable orchestration flow definitions.
- `.opencode/agents/*.md`: Subagent execution contracts.
- `.opencode/get-shit-done/templates/*.md`: Generated artifact formats.

**Testing:**
- Not detected in repository-level source. No test directories or `*.test.*`/`*.spec.*` files are present under root command/workflow sources.

## Naming Conventions

**Files:**
- Slash commands use kebab-case filenames mapped to command names: `.opencode/commands/jarvis/execute-phase.md`, `.opencode/commands/jarvis/map-codebase.md`.
- Agent contracts use `gsd-<role>.md`: `.opencode/agents/gsd-planner.md`, `.opencode/agents/gsd-verifier.md`.
- Planning artifacts use uppercase canonical docs and phase suffix patterns: `.planning/ROADMAP.md`, `.planning/codebase/ARCHITECTURE.md`, `.planning/phases/XX-name/XX-YY-PLAN.md` (specified in `.opencode/get-shit-done/templates/phase-prompt.md`).
- Milestone records use fixed `MILESTONE.md` under slug directories: `.jarvis/milestones/<slug>/MILESTONE.md`.

**Directories:**
- Command namespaces are folder-based (`jarvis`, `gsd`) under `.opencode/commands/`.
- Generated phase folders follow phase-prefixed slug format under `.planning/phases/` (e.g., `01-foundation`), as referenced in `.opencode/commands/jarvis/plan-phase.md`.
- Runtime/service directories are dot-prefixed (`.opencode`, `.planning`, `.jarvis`, `.specs`) to denote internal tooling artifacts.

## Where to Add New Code

**New Feature:**
- Primary code: Add new slash command contracts under `.opencode/commands/jarvis/` and mirrored GSD variants under `.opencode/commands/gsd/` when both namespaces should support the feature.
- Tests: Not applicable in current structure; if introducing tests, create a dedicated test directory for tooling logic (recommended path: `tests/` at repo root) and add matching script entries in `package.json`.

**New Component/Module:**
- Implementation: Add reusable workflow logic to `.opencode/get-shit-done/workflows/` and companion output schema to `.opencode/get-shit-done/templates/`.

**Utilities:**
- Shared helpers: For installer/runtime JS utilities, place them under `bin/` (or introduce `lib/` if JS helper count grows) and reference from `bin/install.js`.

## Special Directories

**`.planning/`:**
- Purpose: Generated project planning state and progress artifacts consumed by commands and agents.
- Generated: Yes.
- Committed: Configurable (`commit_docs` workflow setting in `.planning/config.json` as documented in command workflows).

**`.jarvis/milestones/`:**
- Purpose: Local milestone runtime records created by milestone commands.
- Generated: Yes.
- Committed: Yes in current repository state (contains tracked `MILESTONE.md`).

**`docs-site/.docusaurus/`:**
- Purpose: Docusaurus generated metadata for site builds.
- Generated: Yes.
- Committed: Yes in current repository state.

**`docs-site/build/`:**
- Purpose: Static docs build output used by GitHub Pages deploy step.
- Generated: Yes.
- Committed: Yes in current repository state.

---

*Structure analysis: 2026-02-24*
